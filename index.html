<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Investitions-Quiz</title>
    <style>
        :root {
            --easy-color: #27ae60;
            --medium-color: #f1c40f;
            --hard-color: #e74c3c;
            --special-color: #8e44ad;
            --death-color: #ff0000;
        }

        body {
            font-family: 'Arial', sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background-color: #1a1a1a;
            color: white;
        }

        .teams {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
        }

        .team {
            padding: 20px;
            border-radius: 10px;
            background: #2c3e50;
            min-width: 200px;
            text-align: center;
            transition: all 0.3s;
        }

        .team.active {
            box-shadow: 0 0 15px #e67e22;
            transform: scale(1.05);
        }

        .points {
            font-size: 24px;
            color: #e67e22;
            margin: 10px 0;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
            padding: 20px;
        }

        .question-card {
            padding: 20px;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: all 0.3s;
        }

        .easy { background: var(--easy-color); border: 3px solid #1d8348; }
        .medium { background: var(--medium-color); border: 3px solid #b7950b; }
        .hard { background: var(--hard-color); border: 3px solid #c0392b; }
        .special { background: var(--special-color); border: 3px solid #6c3483; }
        .death { background: var(--death-color); border: 3px solid #8b0000; }

        .question-card.used {
            opacity: 0.5;
            cursor: not-allowed;
            transform: scale(0.95);
        }

        .question-card.selected {
            box-shadow: 0 0 15px white;
            transform: scale(1.05);
        }

        .points-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(0,0,0,0.7);
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 14px;
        }

        .controls {
            text-align: center;
            margin: 30px 0;
        }

        button {
            background: #e67e22;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            margin: 10px 0;
            transition: all 0.3s;
        }

        button:hover {
            background: #d35400;
            transform: scale(1.05);
        }

        .question-display {
            background: #34495e;
            padding: 30px;
            border-radius: 10px;
            margin: 30px 0;
        }

        .explanation {
            margin-top: 20px;
            padding: 15px;
            background: #2c3e50;
            border-radius: 8px;
            white-space: pre-wrap;
            line-height: 1.6;
        }

        .timer {
            font-size: 24px;
            color: #e74c3c;
            margin: 15px 0;
        }

        .joker {
            animation: joker-glow 1s infinite alternate;
        }

        .timer-controls {
            margin-top: 15px;
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        @keyframes joker-glow {
            from { box-shadow: 0 0 5px #fff; }
            to { box-shadow: 0 0 20px #ff0; }
        }
    </style>
</head>
<body>
    <h1>üè≠ Investitions-Quiz</h1>

    <div class="controls">
        <button onclick="startGame(1)">1 Team</button>
        <button onclick="startGame(2)">2 Teams</button>
        <button onclick="startGame(3)">3 Teams</button>
    </div>

    <div class="teams" id="teamsContainer"></div>

    <div class="grid" id="questionsGrid"></div>

    <div class="question-display" id="questionDisplay">
        W√§hlen Sie eine Frage aus der QUIZ-Wand!
    </div>

    <script>
        const questions = {
            easy: [
                {
                    question: "üéâ JOKER: Sofortpunkte! Klicke einfach auf 'Antwort anzeigen' und erhalte die Punkte ohne Antwort!",
                    explanation: "‚úÖ Punkte wurden automatisch gutgeschrieben!",
                    points: 200,
                    joker: true
                },
                {
                    question: "Ein Unternehmen plant eine neue Investition. Neben der Wirtschaftlichkeit m√ºssen auch andere Aspekte ber√ºcksichtigt werden. Nenne zwei dieser Aspekte und erkl√§re sie kurz an einem Beispiel.",
                    explanation: "Antwort:<br><br>‚Ä¢ Umweltaspekte: z.B. Energieverbrauch der neuen Anlage, CO2-Aussto√ü<br>‚Ä¢ Soziale Aspekte: z.B. Auswirkungen auf Arbeitspl√§tze und Arbeitsbedingungen",
                    points: 200
                },
                {
                    question: "Sport Lilly e.K. m√∂chte ein Laufband f√ºr Laufanalysen f√ºr 20.000 ‚Ç¨ kaufen. Es stehen 10.000 ‚Ç¨ Eigenkapital zur Verf√ºgung und 5.000 ‚Ç¨ an liquiden Mittel, die f√ºr das laufende Gesch√§ft (z.B. Zahlung von Rechnungen) ben√∂tigt werden. Wie hoch muss die Fremdfinanzierung √ºber z.B. Kredite sein?",
                    explanation: "Antwort:<br><br>10.000 ‚Ç¨ m√ºssen √ºber Kredite finanziert werden.",
                    points: 200
                },
                {
                    question: "Nenne drei Gr√ºnde, warum ein Unternehmen investieren sollte, um wettbewerbsf√§hig zu bleiben.",
                    explanation: "Antwort:<br><br>‚Ä¢ Anlagen/Maschinen k√∂nnten veralten<br>‚Ä¢ Technologien ver√§ndern sich<br>‚Ä¢ Kundenanforderungen √§ndern sich",
                    points: 200
                },
                {
                    question: "Sport Lilly plant die Einf√ºhrung von Self-Checkout-Kassen. Welche sozialen Folgen k√∂nnte diese Investition haben? Nenne einen Aspekt und begr√ºnde ihn",
                    explanation: "Antwort:<br><br>‚Ä¢ Verlust von Arbeitspl√§tzen, da weniger Kassierer ben√∂tigt werden<br>‚Ä¢ √Ñltere Kunden k√∂nnten sich mit der Technik √ºberfordert f√ºhlen und den Laden meiden",
                    points: 200
                },
                {
                    question: "Die Deutsche Bahn k√§mpft mit Problemen bei der P√ºnktlichkeit und Zuverl√§ssigkeit. Welche Investitionen h√§tten fr√ºhzeitig get√§tigt werden sollen, um dem entgegenzuwirken? Nenne zwei Aspekte.",
                    explanation: "Antwort:<br><br>Investition in Infrastruktur wie Gleise, Personal",
                    points: 200
                }
            ],
            medium: [
                {
                    question: "Sport Lilly investiert in einen KI Chatbot um Kunden beim Online Shoppen zu beraten.  Die Investition in den KI Chatbot kostet 100.000 ‚Ç¨. Die Automatisierung spart Kosten in H√∂he von 15.000 EUR im Jahr und verursacht Wartungskosten in H√∂hte von 1.000 pro Jahr. Wie hoch ist die j√§hrliche Ersparnis?",
                    explanation: "Antwort:<br><br>15.000 - 1.000 = 14.000 ‚Ç¨",
                    points: 400
                },
                {
                    question: "Der Verkaufsladen von Ingolstadt ist nun bereits 15 Jahre alt. Das Gesch√§ft l√§uft wunderbar und die Prognose sieht f√ºr die n√§chsten Jahre weiterhin exzellent aus. Welche Investitionen k√∂nnten dennoch n√∂tig sein? Nenne drei Investitionen!",
                    explanation: "Antwort:<br><br>‚Ä¢ Regale<br>‚Ä¢ Anstrich<br>‚Ä¢ M√∂bel<br>‚Ä¢ Vergr√∂√üerung",
                    points: 400
                },
                {
                    question: "Sport Lilly plant eine zweite Filiale in Ingolstadt zu er√∂ffnen, Kostenpunkt 500.000 EUR. Welche M√∂glichkeiten bestehen, um Investition zu finanzieren? Nenne eine eigene und fremde Finanzierungsm√∂glichkeit.",
                    explanation: "Antwort:<br><br>Eigenfinanzierung: Gewinnr√ºcklagen<br>Fremdfinanzierung: Bankkredit",
                    points: 400
                },
                {
                    question: "Sport Lilly verzichtete auf die Entwicklung einer eigenen Shopping-App (Kosten: 100.000 EUR), da die Verkaufsprognosen auch mit den bestehenden Vertriebswegen (Filialen und Online-Shop) positiv sind. Welche langfristigen Gesch√§ftsrisiken k√∂nnten durch diese Entscheidung entstehen? Nenne zwei Risiken!",
                    explanation: "Antwort:<br><br>‚Ä¢ Kundenabwanderung zu Konkurrenten<br>‚Ä¢ Fehlende Digitalisierungsstrategie",
                    points: 400
                },
                {
                    question: "Sport Lilly m√∂chte in eine neue Filiale bauen. Welche wirtschaftlichen, √∂kologischen und sozialen Aspekte sind dabei relevant? Nenne jeweils einen Punkt!",
                    explanation: "Antwort:<br><br>‚Ä¢ Wirtschaftlich: ROI<br>‚Ä¢ √ñkologisch: Energieeffizienz<br>‚Ä¢ Sozial: Arbeitspl√§tze",
                    points: 400
                },
                {
                    question: "Sport Lilly steht vor der Wahl: (A) Investition in eine automatisierte Lagerhaltung (Kosten: 300.000 ‚Ç¨) oder (B) Erweiterung der Produktion in einem Niedriglohnland (Kosten: 150.000 ‚Ç¨). Bewerten Sie die Optionen wirtschaftlich und ethisch!",
                    explanation: "Antwort:<br><br>Wirtschaftlich: A ist billiger als B<br>Ethisch: B Ausbeutung, A Arbeitspl√§tze gehen wom√∂glich verloren",
                    points: 400
                }
            ],
            hard: [
                {
                    question: "Sport Lilly investiert in einen KI Chatbot um Kunden beim Online Shoppen zu beraten. Die Investition in den KI Chatbot kostet 100.000 ‚Ç¨. Der bisherige Service durch Menschen kostete 25.000 EUR im Jahr. Die Ersparnis durch die Investition liegt j√§hrlich bei 10.000 EUR. Ab welchem Jahr amortisiert sich die Investition (sind die Kosten wieder reingeholt)?",
                    explanation: "Antwort:<br><br>100.000 / 10.000 = 10 Jahre",
                    points: 600
                },
                {
                    question: "Sport Lilly setzt auf traditionelle Verkaufsm√∂glichkeiten, wie Filialen und einen Online-Shop. Der Gesch√§ftsf√ºhrer √ºberlegt nun, ob er in Social Media Marketing investieren soll. Influencer auf Instagram und TikTok w√ºrden 50.000 EUR im ersten Jahr kosten. Durch die erh√∂hte Reichweite werden Mehreinnahmen von 40.000 EUR erwartet. Die Kosten f√ºr Influencer steigen im zweiten Jahr auf 60.000 EUR, die erwarteten Mehreinnahmen auf 85.000 EUR. Berechne den Gewinn/Verlust nach zwei Jahren.",
                    explanation: "Antwort:<br><br>J1: -10.000 ‚Ç¨<br>J2: +25.000 ‚Ç¨<br>Gesamt: +15.000 ‚Ç¨",
                    points: 600
                },
                {
                    question: "Sport Lilly erw√§gt die Investition in eine eigene Produktlinie f√ºr nachhaltige Sportbekleidung. Welche Aspekte m√ºssen bei dieser Entscheidung ber√ºcksichtigt werden? Nenne 3 Aspekte.",
                    explanation: "Antwort:<br><br>‚Ä¢ Nachfrage<br>‚Ä¢ Produktionskosten, Einkauf<br>‚Ä¢ Konkurrenz<br>‚Ä¢ Zertifizierungen",
                    points: 600
                },
                {
                    question: "Sport Lilly steht vor der Entscheidung zwischen der Modernisierung des bestehenden Hauptgesch√§fts oder der Er√∂ffnung einer neuen Filiale in einem aufstrebenden Stadtteil. Nenne zwei Punkte, die f√ºr die Modernisierung und zwei Punkte, die f√ºr die neue Filiale sprechen k√∂nnten.",
                    explanation: "Antwort:<br><br>Modernisierung:<br>‚Ä¢ Kundenbindung durch verbessertes Einkaufserlebnis<br>‚Ä¢ Reduzierung des gesch√§ftlichen Risikos durch etablierten Standort<br>Neue Filiale:<br>‚Ä¢ Erschlie√üung neuer Kundengruppen<br>‚Ä¢ Chance auf zus√§tzliches Wachstum",
                    points: 600
                },
                {
                    question: "5. F√ºr eine Expansion ben√∂tigt Sport Lilly 1 Mio. ‚Ç¨. Das Unternehmen hat 400.000 ‚Ç¨ Eigenkapital und einen Kreditrahmen von 800.000 ‚Ç¨. Die Bank finanziert maximal 70 % der Investition. Ist die Expansion finanziell m√∂glich? Begr√ºnde mit Berechnungen.",
                    explanation: "Antwort:<br><br>Bankbedingung: 70 % Fremdfinanzierung ‚Üí 1.000.000 √ó 0,7 = 700.000 ‚Ç¨. Da der Kreditrahmen bei 800.000 ‚Ç¨ liegt, ist die Finanzierung m√∂glich. Eigenkapitalanteil: 300.000 ‚Ç¨ (400.000 ‚Ç¨ vorhanden ‚Üí ausreichend).",
                    points: 600
                }
            ],
            death: [
                {
                    question: "üíÄ FINGER DES TODES üíÄ (1000 Punkte)",
                    explanation: "Aufgabe:<br><br>Gehe in ein Nachbarklassenzimmer und frage h√∂flich nach einem Whiteboard-Stift. Komme so schnell wie m√∂glich zur√ºck und schreibe eine Investition, die die Dieter-Hildebrandt-Wirtschaftsschule t√§tigen sollte, an die Tafel!",
                    points: 1000,
                    special: true
                }
            ]
        };

        let teams = [];
        let currentTeam = 0;
        let selectedQuestion = null;
        let countdownInterval = null;
        let timeLeft = 0;
        let timerRunning = false;

        function startGame(teamCount) {
            teams = Array.from({length: teamCount}, (_, i) => ({
                name: `Team ${i + 1}`,
                points: 0
            }));
            
            Object.values(questions).forEach(category => {
                category.forEach(q => {
                    q.used = false;
                    q.selected = false;
                    q.attempts = 0;
                });
            });

            currentTeam = 0;
            clearInterval(countdownInterval);
            timerRunning = false;
            renderTeams();
            createQuestionGrid();
            document.getElementById("questionDisplay").innerHTML = "W√§hlen Sie eine Frage aus der QUIZ-Wand!";
        }

        function renderTeams() {
            const container = document.getElementById("teamsContainer");
            container.innerHTML = teams.map((team, index) => `
                <div class="team ${index === currentTeam ? 'active' : ''}">
                    <h3>${team.name}</h3>
                    <div class="points">${team.points} Punkte</div>
                </div>
            `).join('');
        }

        function createQuestionGrid() {
            const grid = document.getElementById("questionsGrid");
            grid.innerHTML = "";
            
            Object.entries(questions).forEach(([difficulty, items]) => {
                items.forEach((q, index) => {
                    const card = document.createElement("div");
                    card.className = `question-card ${difficulty} ${q.used ? 'used' : ''} ${q.selected ? 'selected' : ''} ${q.joker ? 'joker' : ''}`;
                    card.innerHTML = `
                        <div class="points-badge">${q.attempts > 0 ? Math.floor(q.points/2) : q.points}</div>
                        ${q.special ? 'üíÄ' : ''} ${difficulty.toUpperCase()}<br>
                        Frage ${index + 1}
                    `;
                    
                    if (!q.used) {
                        card.onclick = () => selectQuestion(q, difficulty, index);
                    }
                    grid.appendChild(card);
                });
            });
        }

        function selectQuestion(question, difficulty, index) {
            if (question.used) return;
            
            Object.values(questions).forEach(cat => cat.forEach(q => q.selected = false));
            question.selected = true;
            selectedQuestion = question;
            createQuestionGrid();
            
            let seconds = 60;
            if (difficulty === 'medium') seconds = 120;
            if (difficulty === 'hard') seconds = 180;
            if (difficulty === 'death') seconds = 75;

            let displayHTML = `
                <h3>${difficulty.toUpperCase()}-Frage (${question.attempts > 0 ? Math.floor(question.points/2) : question.points} Punkte)</h3>
                <p>${question.question}</p>
                <div class="timer" id="timerDisplay">Timer: ${formatTime(seconds)}</div>
                <div class="timer-controls">
                    <button id="timerControl" onclick="toggleTimer()">Timer starten</button>
                    <button onclick="resetTimer()">Timer zur√ºcksetzen</button>
                </div>
            `;

            if (question.joker) {
                displayHTML += `
                    <button onclick="handleJoker()">Joker einsetzen üéâ</button>
                    <div class="explanation" id="explanation" style="display:none">
                        ${question.explanation}
                    </div>
                `;
            } else if (difficulty === 'death') {
                displayHTML += `
                    <div class="explanation">
                        ${question.explanation}
                    </div>
                    <div id="specialTaskButtons" style="margin-top:20px">
                        <button onclick="handleSpecialSuccess()">Aufgabe geschafft ‚úÖ</button>
                        <button onclick="handleAnswer(false)">Zeit abgelaufen ‚ùå</button>
                    </div>
                `;
            } else {
                displayHTML += `
                    <button onclick="revealAnswer()">Antwort anzeigen</button>
                    <div class="explanation" id="explanation" style="display:none">
                        ${question.explanation}
                    </div>
                    <div id="judgementButtons" style="display:none; margin-top:20px">
                        <button onclick="handleAnswer(true)">Richtig ‚úÖ</button>
                        <button onclick="handleAnswer(false)">Falsch ‚ùå</button>
                    </div>
                `;
            }

            document.getElementById("questionDisplay").innerHTML = displayHTML;
            timeLeft = seconds;
            timerRunning = false;
            updateTimerDisplay();
        }

        function resetTimer() {
            const difficulty = Object.entries(questions).find(([_, cat]) => 
                cat.includes(selectedQuestion)
            )[0];
            
            if (difficulty === 'easy') timeLeft = 60;
            else if (difficulty === 'medium') timeLeft = 120;
            else if (difficulty === 'hard') timeLeft = 180;
            else timeLeft = 75;
            
            updateTimerDisplay();
        }

        function toggleTimer() {
            const timerButton = document.getElementById('timerControl');
            if (!timerRunning) {
                timerRunning = true;
                timerButton.textContent = 'Timer stoppen';
                startTimer(timeLeft);
            } else {
                timerRunning = false;
                timerButton.textContent = 'Timer fortsetzen';
                clearInterval(countdownInterval);
            }
        }

        function startTimer(seconds) {
            timeLeft = seconds;
            updateTimerDisplay();
            
            countdownInterval = setInterval(() => {
                if (timerRunning) {
                    timeLeft--;
                    updateTimerDisplay();
                    
                    if (timeLeft <= 0) {
                        clearInterval(countdownInterval);
                        if (selectedQuestion && !selectedQuestion.joker) {
                            handleAnswer(false);
                        }
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const timerDisplay = document.getElementById('timerDisplay');
            if (timerDisplay) {
                timerDisplay.textContent = `Timer: ${formatTime(timeLeft)}`;
            }
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function revealAnswer() {
            document.getElementById('explanation').style.display = 'block';
            document.getElementById('judgementButtons').style.display = 'block';
        }

        function handleJoker() {
            teams[currentTeam].points += selectedQuestion.points;
            selectedQuestion.used = true;
            clearInterval(countdownInterval);
            nextRound();
        }

        function handleSpecialSuccess() {
            teams[currentTeam].points += selectedQuestion.points;
            selectedQuestion.used = true;
            clearInterval(countdownInterval);
            nextRound();
        }

        function handleAnswer(isCorrect) {
            clearInterval(countdownInterval);
            timerRunning = false;
            
            if (isCorrect) {
                const points = selectedQuestion.attempts > 0 
                    ? Math.floor(selectedQuestion.points/2)
                    : selectedQuestion.points;
                
                teams[currentTeam].points += points;
                selectedQuestion.used = true;
            } else {
                selectedQuestion.attempts++;
                if (selectedQuestion.attempts >= 2) {
                    selectedQuestion.used = true;
                }
            }

            selectedQuestion.selected = false;
            currentTeam = (currentTeam + 1) % teams.length;
            
            renderTeams();
            createQuestionGrid();
            
            document.getElementById("questionDisplay").innerHTML = `
                <p>${isCorrect ? '‚úÖ Richtige Antwort!' : '‚ùå Falsche Antwort oder Zeit abgelaufen!'}<br>
                N√§chste Runde: ${teams[currentTeam].name}</p>
            `;
            
            checkGameEnd();
        }

        function nextRound() {
            selectedQuestion.selected = false;
            currentTeam = (currentTeam + 1) % teams.length;
            renderTeams();
            createQuestionGrid();
            document.getElementById("questionDisplay").innerHTML = `
                <p>N√§chste Runde: ${teams[currentTeam].name}</p>
            `;
            checkGameEnd();
        }

        function checkGameEnd() {
            const allUsed = Object.values(questions).every(category => 
                category.every(q => q.used)
            );
            
            if (allUsed) {
                const winner = teams.reduce((prev, current) => 
                    (prev.points > current.points) ? prev : current);
                    
                alert(`üèÜ Spielende! Gewinner ist ${winner.name} mit ${winner.points} Punkten!`);
                startGame(teams.length);
            }
        }
    </script>
</body>
</html>